:root {
  --bg: #0b1020;
  --card: #121933;
  --text: #e9eefc;
  --muted: #98a3c7;
  --accent: #4da3ff;
  --accent-2: #2bd4bd;
  --danger: #ff6b6b;
  --ok: #32d583;
  --border: #1f2a4a;
  --btn-bg: #1a2442;
  --btn-bg-hover: #23315c;
  --focus: #ffd166;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; padding: 16px;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text); background: radial-gradient(1200px 800px at 70% -10%, #142047, #090f22 60%, #070b18 100%);
}

.app-header, .app-footer { text-align: center; }
h1 { margin: 8px 0 0; font-size: 1.6rem; letter-spacing: .3px; }
.subtitle { margin: 4px 0 16px; color: var(--muted); }

.container { max-width: 820px; margin: 0 auto; display: grid; gap: 16px; }
.controls, .result, .history, .preview, .help {
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01));
  border: 1px solid var(--border);
  border-radius: 12px; padding: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.05);
}

.controls { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
select, .btn, .toggle {
  border-radius: 10px; border: 1px solid var(--border); height: 40px;
}
select {
  background: var(--card); color: var(--text);
  padding: 0 10px; min-width: 160px;
}

.btn {
  background: var(--btn-bg); color: var(--text);
  padding: 0 14px; cursor: pointer;
  transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
  display: inline-flex; align-items: center; gap: 8px;
  box-shadow: 0 2px 0 rgba(0,0,0,.25);
}
.btn:hover { background: var(--btn-bg-hover); transform: translateY(-1px); }
.btn:active { transform: translateY(1px); }
.btn[disabled] { opacity: .5; cursor: not-allowed; }
.btn.primary { background: linear-gradient(180deg, #2c74ff, #144bdb); border-color: #1a46c2; }
.btn.primary:hover { background: linear-gradient(180deg, #3b81ff, #1b56ee); }
.btn.danger { background: #4a1f1f; border-color: #7a2e2e; }

.toggle { display: inline-flex; align-items: center; gap: 6px; padding: 0 10px; background: var(--card); }
.toggle input { accent-color: var(--accent); }

.preview .video-wrap {
  position: relative; margin: 0 auto; max-width: 420px; aspect-ratio: 3 / 4;
  border-radius: 14px; overflow: hidden; border: 1px solid var(--border);
  background: #000;
}
video { width: 100%; height: 100%; object-fit: cover; display: block; }

.overlay { position: absolute; inset: 0; pointer-events: none; }
.finder {
  position: absolute; inset: 12% 12% 12% 12%;
  border: 2px solid rgba(255,255,255,.65); border-radius: 12px;
  box-shadow: 0 0 0 9999px rgba(0,0,0,.45) inset;
}
.scanline {
  position: absolute; left: 14%; right: 14%; height: 2px; top: 14%;
  background: linear-gradient(90deg, transparent, rgba(77,163,255,.9), transparent);
  animation: scan 2.4s linear infinite;
  filter: drop-shadow(0 0 8px rgba(77,163,255,.85));
}
@keyframes scan {
  0% { top: 14%; }
  100% { top: 86%; }
}

#status { text-align: center; color: var(--muted); margin: 8px 0 0; }

.result h2, .history h2 { margin: 6px 0 10px; font-size: 1.1rem; }
.result output {
  display: block; min-height: 2.2em; padding: 10px;
  background: var(--card); border: 1px solid var(--border); border-radius: 8px;
  word-break: break-word;
}
.result-actions { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px; }

.history-actions { display: flex; gap: 8px; margin-top: 8px; }
#history { list-style: none; padding: 0; margin: 0; display: grid; gap: 6px; }
#history li {
  background: var(--card); border: 1px solid var(--border); border-radius: 8px;
  padding: 8px; display: grid; gap: 6px;
}
.history-row { display: flex; align-items: center; gap: 8px; justify-content: space-between; }
.code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; word-break: break-word; }
.badge { padding: 2px 8px; border-radius: 999px; font-size: .75rem; background: #162044; color: var(--accent-2); border: 1px solid #25406d; }
.item-actions { display: flex; gap: 6px; }

.help { color: var(--muted); }

.app-footer { margin-top: 12px; color: var(--muted); }

.sr-only {
  position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0;
}

/* Focus visible for accessibility */
:focus-visible {
  outline: 2px dashed var(--focus);
  outline-offset: 2px;
}
